MyProtocol: !protocol
  sequence:
    tree: BinaryTree
    ptree: !recursive BinaryTree

    list: LinkedList<string>?

    cwd: !stream
      items: DirectoryEntry


BinaryTree: !record
  fields:
    value: int
    left: !recursive BinaryTree
    right: !recursive BinaryTree


LinkedList<T>: !record
  fields:
    value: T
    next: !recursive LinkedList<T>


Directory: !record
  fields:
    name: string
    entries: DirectoryEntry*
File: !record
  fields:
    name: string
    data: byte*
DirectoryEntry: [File, !recursive Directory]
